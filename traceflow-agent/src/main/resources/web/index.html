<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>TraceFlow UI</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>

<div id="sidebar">
    <h3>TraceFlow Monitor</h3>

    <div class="controls">
        <button onclick="checkNewSessions()">새로고침</button>
        <button onclick="toggleAutoRefresh()" id="autoBtn">자동: OFF</button>
    </div>

    <div id="status">대기 중...</div>

    <!-- 필터 섹션 -->
    <div class="filter-section">
        <h4>🔍 메서드 필터</h4>

        <div class="filter-option">
            <input type="checkbox" id="filter-accessor" onchange="applyFilters()">
            <label for="filter-accessor">
                Getter/Setter 표시
                <span class="filter-count" id="count-accessor">0</span>
            </label>
        </div>

        <div class="filter-stats" id="filter-stats">
            표시 중: 0 / 전체: 0
        </div>
    </div>

    <h4>세션 목록 <span id="sessionCount" class="badge">0</span></h4>
    <div id="session-list"></div>
</div>

<div id="graph">
    <h3>호출 트리</h3>

    <div id="graph-container">
        <!-- 줌 컨트롤 -->
        <div class="zoom-controls">
            <button onclick="zoomIn()" title="확대">+</button>
            <div class="zoom-level" id="zoom-level">100%</div>
            <button onclick="zoomOut()" title="축소">−</button>
            <button onclick="zoomReset()" title="초기화">⟲</button>
        </div>

        <svg></svg>
    </div>
</div>

<!-- 모달 -->
<div class="modal-overlay" id="modal" onclick="closeModalOnOverlay(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-header">
            <div class="modal-title">메서드 상세정보</div>
            <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <div id="modal-body"></div>
    </div>
</div>

<script src="js/app.js"></script>
</body>
</html>