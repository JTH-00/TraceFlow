<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>TraceFlow UI</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>

<div id="sidebar">
    <h3>TraceFlow Monitor</h3>

    <div class="controls">
        <button onclick="checkNewSessions()">Refresh</button>
        <button onclick="toggleAutoRefresh()" id="autoBtn">Auto: OFF</button>
    </div>

    <div id="status">Waiting...</div>

    <!-- ÌïÑÌÑ∞ ÏÑπÏÖò -->
    <div class="filter-section">
        <h4>üîç Method Filter</h4>

        <div class="filter-option">
            <input type="checkbox" id="filter-accessor" onchange="applyFilters()">
            <label for="filter-accessor">
                Show Getter/Setter
                <span class="filter-count" id="count-accessor">0</span>
            </label>
        </div>

        <div class="filter-option">
            <input type="checkbox" id="merge-duplicates" onchange="applyFilters()">
            <label for="merge-duplicates">
                Merge Duplicate Methods
                <span class="filter-count" id="count-duplicates">0</span>
            </label>
        </div>

        <div class="filter-stats" id="filter-stats">
            Showing: 0 / Total: 0
        </div>
    </div>

    <h4>Session List<span id="sessionCount" class="badge">0</span></h4>
    <div id="session-list"></div>
</div>

<div id="graph">
    <h3>Call Tree</h3>

    <div id="graph-container">
        <!-- Zoom Controls -->
        <div class="zoom-controls">
            <button onclick="zoomIn()" title="zoom-in">+</button>
            <div class="zoom-level" id="zoom-level">100%</div>
            <button onclick="zoomOut()" title="zoom-out">‚àí</button>
            <button onclick="zoomReset()" title="reset">‚ü≤</button>
        </div>

        <svg></svg>
    </div>
</div>

<!-- Modal -->
<div class="modal-overlay" id="modal" onclick="closeModalOnOverlay(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-header">
            <div class="modal-title">Method Details</div>
            <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <div id="modal-body"></div>
    </div>
</div>

<script src="js/app.js"></script>
</body>
</html>